(function(t){function e(e){for(var i,r,s=e[0],h=e[1],c=e[2],u=0,p=[];u<s.length;u++)r=s[u],a[r]&&p.push(a[r][0]),a[r]=0;for(i in h)Object.prototype.hasOwnProperty.call(h,i)&&(t[i]=h[i]);d&&d(e);while(p.length)p.shift()();return o.push.apply(o,c||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],i=!0,s=1;s<n.length;s++){var h=n[s];0!==a[h]&&(i=!1)}i&&(o.splice(e--,1),t=r(r.s=n[0]))}return t}var i={},a={app:0},o=[];function r(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=i,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],h=s.push.bind(s);s.push=e,s=s.slice();for(var c=0;c<s.length;c++)e(s[c]);var d=h;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";var i=n("c21b"),a=n.n(i);a.a},"1a6a":function(t,e,n){"use strict";var i=n("eee0"),a=n.n(i);a.a},"361d":function(t,e,n){t.exports=n.p+"media/video_2.edc78e9f.mp4"},4990:function(t,e,n){"use strict";var i=n("852d"),a=n.n(i);a.a},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("097d");var i=n("2b0e"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("home")],1)},o=[],r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home"},[n("h1",[t._v("MUSIC GENERATOR")]),n("editor"),t._m(0)],1)},s=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("a",{attrs:{href:"https://decent.org",target:"_blank"}},[n("img",{attrs:{src:"https://decent.org/assets/created_by_decent_badge/created_by_badge_white.png",alt:"created_by_decent_labs"}})])}],h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"editor"}},[n("div",{staticClass:"container"},[n("div",{staticClass:"column right"},[n("moodSelector",{on:{selectMood:t.selectMood}}),n("graphEditor",{attrs:{videoDuration:t.videoDuration,currentTime:t.currentTime,isPlaying:t.isPlaying},on:{stop:t.stop,intensities:t.getIntensities,currentTimeChanged:t.currentTimeChanged}})],1),n("div",{staticClass:"column left"},[n("label",{attrs:{for:"mute-video"}},[t._v("\n        Mute video\n        "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.mute,expression:"mute"}],attrs:{type:"checkbox",name:"mute-video",title:"mute video"},domProps:{checked:Array.isArray(t.mute)?t._i(t.mute,null)>-1:t.mute},on:{change:function(e){var n=t.mute,i=e.target,a=!!i.checked;if(Array.isArray(n)){var o=null,r=t._i(n,o);i.checked?r<0&&(t.mute=n.concat([o])):r>-1&&(t.mute=n.slice(0,r).concat(n.slice(r+1)))}else t.mute=a}}})]),n("videoPlayer",{attrs:{currentTime:t.currentTime,isPlaying:t.isPlaying,intensities:t.intensities,mute:t.mute},on:{intensityChange:t.intensityChange,videoDuration:t.getVideoDuration,currentTimeChanged:t.currentTimeChanged}})],1)])])},c=[],d=(n("c5f6"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"video-player"},[i("video",{ref:"myVideo",attrs:{id:"video"}},[i("source",{attrs:{src:n("361d"),type:"video/mp4"}})])])}),u=[],p=(n("ac6a"),{name:"videoPlayer",props:["currentTime","isPlaying","restart","intensities","mute"],data:function(){return{videoUrl:"./../assets/test_assets/video.mp4",video:null,duration:null}},mounted:function(){var t=this;this.video=document.querySelector("#video"),this.video.addEventListener("durationchange",function(e){t.duration=t.video.duration,t.$emit("videoDuration",t.duration)})},computed:{currentTimeComputed:{get:function(){return this.currentTime},set:function(t){this.$emit("currentTimeChanged",t)}}},methods:{play:function(){this.addTrackToVideo(),this.video.muted=this.mute,this.video.play()},stop:function(){this.video.pause()},addTrackToVideo:function(){var t=this.video.addTextTrack("subtitles","test","en");t.mode="hidden",this.intensities.forEach(function(e,n){t.addCue(new VTTCue(e.time,e.time+1,e.value))});var e=this;t.oncuechange=function(t){this.activeCues[0]&&e.$emit("intensityChange",Number(this.activeCues[0].text))}}},watch:{currentTime:function(t){this.video.currentTime=t},isPlaying:function(t){t?this.play():this.stop()},mute:function(t){this.video.muted=t},intensities:function(t){this.addTrackToVideo()}}}),l=p,m=(n("1a6a"),n("2877")),f=Object(m["a"])(l,d,u,!1,null,"d01006c0",null);f.options.__file="videoPlayer.vue";var v=f.exports,g=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},S=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"graph-editor"},[n("canvas",{attrs:{id:"canvas",resize:"true",hidpi:"off"}})])}],M=n("8cc4"),z=n.n(M),y=function(t){console.log("generating melodies...");var e={},n=[8,8,6,6];n.forEach(function(t,n){e["seed".concat(n)]=Math.floor(Math.random()*t)});var i={notes:[{pitch:t.pitches1[Math.floor(Math.random()*t.pitches1.length-1)],quantizedStartStep:0,quantizedEndStep:e.seed0},{pitch:t.pitches1[Math.floor(Math.random()*t.pitches1.length-1)],quantizedStartStep:e.seed0,quantizedEndStep:e.seed0+e.seed1},{pitch:t.pitches1[Math.floor(Math.random()*t.pitches1.length-1)],quantizedStartStep:e.seed0+e.seed1,quantizedEndStep:e.seed0+e.seed1+8}]},a={notes:[{pitch:t.pitches2[Math.floor(Math.random()*t.pitches2.length-1)],quantizedStartStep:0,quantizedEndStep:1},{pitch:t.pitches2[Math.floor(Math.random()*t.pitches2.length-1)],quantizedStartStep:1,quantizedEndStep:2},{pitch:t.pitches2[Math.floor(Math.random()*t.pitches2.length-1)],quantizedStartStep:2,quantizedEndStep:3},{pitch:t.pitches2[Math.floor(Math.random()*t.pitches2.length-1)],quantizedStartStep:3,quantizedEndStep:4},{pitch:t.pitches2[Math.floor(Math.random()*t.pitches2.length-1)],quantizedStartStep:4,quantizedEndStep:5},{pitch:t.pitches2[Math.floor(Math.random()*t.pitches2.length-1)],quantizedStartStep:5,quantizedEndStep:6},{pitch:t.pitches2[Math.floor(Math.random()*t.pitches2.length-1)],quantizedStartStep:6,quantizedEndStep:7},{pitch:t.pitches2[Math.floor(Math.random()*t.pitches2.length-1)],quantizedStartStep:7,quantizedEndStep:8},{pitch:t.pitches2[Math.floor(Math.random()*t.pitches2.length-1)],quantizedStartStep:8,quantizedEndStep:9},{pitch:t.pitches2[Math.floor(Math.random()*t.pitches2.length-1)],quantizedStartStep:9,quantizedEndStep:10},{pitch:t.pitches2[Math.floor(Math.random()*t.pitches2.length-1)],quantizedStartStep:10,quantizedEndStep:11},{pitch:t.pitches2[Math.floor(Math.random()*t.pitches2.length-1)],quantizedStartStep:11,quantizedEndStep:12},{pitch:t.pitches2[Math.floor(Math.random()*t.pitches2.length-1)],quantizedStartStep:12,quantizedEndStep:13},{pitch:t.pitches2[Math.floor(Math.random()*t.pitches2.length-1)],quantizedStartStep:13,quantizedEndStep:14},{pitch:t.pitches2[Math.floor(Math.random()*t.pitches2.length-1)],quantizedStartStep:14,quantizedEndStep:15},{pitch:t.pitches2[Math.floor(Math.random()*t.pitches2.length-1)],quantizedStartStep:15,quantizedEndStep:16},{pitch:t.pitches2[Math.floor(Math.random()*t.pitches2.length-1)],quantizedStartStep:16,quantizedEndStep:17},{pitch:t.pitches2[Math.floor(Math.random()*t.pitches2.length-1)],quantizedStartStep:17,quantizedEndStep:18},{pitch:t.pitches2[Math.floor(Math.random()*t.pitches2.length-1)],quantizedStartStep:18,quantizedEndStep:19},{pitch:t.pitches2[Math.floor(Math.random()*t.pitches2.length-1)],quantizedStartStep:19,quantizedEndStep:20},{pitch:t.pitches2[Math.floor(Math.random()*t.pitches2.length-1)],quantizedStartStep:20,quantizedEndStep:21},{pitch:t.pitches2[Math.floor(Math.random()*t.pitches2.length-1)],quantizedStartStep:21,quantizedEndStep:22},{pitch:t.pitches2[Math.floor(Math.random()*t.pitches2.length-1)],quantizedStartStep:22,quantizedEndStep:23},{pitch:t.pitches2[Math.floor(Math.random()*t.pitches2.length-1)],quantizedStartStep:23,quantizedEndStep:24},{pitch:t.pitches2[Math.floor(Math.random()*t.pitches2.length-1)],quantizedStartStep:24,quantizedEndStep:25},{pitch:t.pitches2[Math.floor(Math.random()*t.pitches2.length-1)],quantizedStartStep:25,quantizedEndStep:26},{pitch:t.pitches2[Math.floor(Math.random()*t.pitches2.length-1)],quantizedStartStep:26,quantizedEndStep:27},{pitch:t.pitches2[Math.floor(Math.random()*t.pitches2.length-1)],quantizedStartStep:27,quantizedEndStep:28},{pitch:t.pitches2[Math.floor(Math.random()*t.pitches2.length-1)],quantizedStartStep:28,quantizedEndStep:29},{pitch:t.pitches2[Math.floor(Math.random()*t.pitches2.length-1)],quantizedStartStep:29,quantizedEndStep:30},{pitch:t.pitches2[Math.floor(Math.random()*t.pitches2.length-1)],quantizedStartStep:30,quantizedEndStep:31},{pitch:t.pitches2[Math.floor(Math.random()*t.pitches2.length-1)],quantizedStartStep:31,quantizedEndStep:32}]},o={notes:[{pitch:t.pitches1[Math.floor(Math.random()*t.pitches1.length-1)],quantizedStartStep:e.seed2,quantizedEndStep:e.seed2+e.seed3},{pitch:t.pitches1[Math.floor(Math.random()*t.pitches1.length-1)],quantizedStartStep:e.seed2+e.seed3,quantizedEndStep:e.seed2+e.seed3+16}]},r={notes:[{pitch:t.pitches2[Math.floor(Math.random()*t.pitches2.length-1)],quantizedStartStep:0,quantizedEndStep:2},{pitch:t.pitches2[Math.floor(Math.random()*t.pitches2.length-1)],quantizedStartStep:2,quantizedEndStep:4},{pitch:t.pitches2[Math.floor(Math.random()*t.pitches2.length-1)],quantizedStartStep:4,quantizedEndStep:6},{pitch:t.pitches2[Math.floor(Math.random()*t.pitches2.length-1)],quantizedStartStep:6,quantizedEndStep:8},{pitch:t.pitches2[Math.floor(Math.random()*t.pitches2.length-1)],quantizedStartStep:8,quantizedEndStep:10},{pitch:t.pitches2[Math.floor(Math.random()*t.pitches2.length-1)],quantizedStartStep:10,quantizedEndStep:12},{pitch:t.pitches2[Math.floor(Math.random()*t.pitches2.length-1)],quantizedStartStep:12,quantizedEndStep:14},{pitch:t.pitches2[Math.floor(Math.random()*t.pitches2.length-1)],quantizedStartStep:14,quantizedEndStep:16},{pitch:t.pitches2[Math.floor(Math.random()*t.pitches2.length-1)],quantizedStartStep:16,quantizedEndStep:18},{pitch:t.pitches2[Math.floor(Math.random()*t.pitches2.length-1)],quantizedStartStep:18,quantizedEndStep:20},{pitch:t.pitches2[Math.floor(Math.random()*t.pitches2.length-1)],quantizedStartStep:20,quantizedEndStep:22},{pitch:t.pitches2[Math.floor(Math.random()*t.pitches2.length-1)],quantizedStartStep:22,quantizedEndStep:24},{pitch:t.pitches2[Math.floor(Math.random()*t.pitches2.length-1)],quantizedStartStep:24,quantizedEndStep:26},{pitch:t.pitches2[Math.floor(Math.random()*t.pitches2.length-1)],quantizedStartStep:26,quantizedEndStep:28},{pitch:t.pitches2[Math.floor(Math.random()*t.pitches2.length-1)],quantizedStartStep:28,quantizedEndStep:30},{pitch:t.pitches2[Math.floor(Math.random()*t.pitches2.length-1)],quantizedStartStep:30,quantizedEndStep:32}]};return{MELODY1:i,MELODY2:a,MELODY3:o,MELODY4:r}},q=y;"running"!==z.a.context.state&&z.a.context.resume(),document.documentElement.addEventListener("mousedown",function(){"running"!==z.a.context.state&&z.a.context.resume()});var x={soft:{pitches2:[48,50,55,57,58,60,62,63,65,67,72,84],pitches1:[50,64,65,69,70]},vivid:{pitches2:[67,69,71,74,76,79,81,83,84,85,86],pitches1:[53,57,58,60,62,64]},dark:{pitches2:[48,49,54,55,56],pitches1:[36,37,45,46]}},E=12,P=1/E,b="./data/mel_small",w=32,k=x["vivid"],T=1,_=q(k);$();var C,D,L,O=-1;function A(t){T=t,console.log(T,"INTENSITY")}function F(t){k!==x[t]&&(k=x[t],_=q(k),$())}function $(){new musicvae.MusicVAE(b).initialize().then(function(t){return t.interpolate([_.MELODY1,_.MELODY2],E)}).then(function(t){C=t,console.log("seq1 generated")}),new musicvae.MusicVAE(b).initialize().then(function(t){return t.interpolate([_.MELODY3,_.MELODY4],E)}).then(function(t){D=t,console.log("seq2 generated")})}F("vivid");var j=new z.a.Convolver("https://s3-us-west-2.amazonaws.com/s.cdpn.io/969699/hm2_000_ortf_48k.mp3").toMaster();j.wet.value=.4;var N=new z.a.Chorus(.2,2.5,.2).connect(j),R=new z.a.Phaser({frequency:.1,octaves:2,baseFrequency:400}).toMaster(),I=new z.a.AMSynth({envelope:{attack:.5,decay:.1,sustain:1,release:16}}).connect(N),V=new z.a.PolySynth(6,z.a.Synth,{envelope:{attack:.01,decay:.1,sustain:.1,release:2}}).connect(N),Y=new z.a.FMSynth({harmonicity:5,modulationIndex:20,envelope:{attack:.1,decay:3,sustain:2,release:3}}).connect(N),W=new z.a.AMSynth({envelope:{attack:.5,decay:.1,sustain:1,release:16}}).connect(N),B=new z.a.PolySynth(6,z.a.Synth,{envelope:{attack:.01,decay:.1,sustain:.1,release:2}}).connect(N),H=new z.a.FMSynth({harmonicity:10,modulationIndex:5,envelope:{attack:.1,decay:3,sustain:2,release:3}}).connect(N),J=(new z.a.PolySynth(6,z.a.Synth,{oscillator:{partials:[1,2,3,4]},envelope:{attack:2,decay:3,sustain:2,release:6}}).connect(R),(new z.a.MembraneSynth).toMaster()),U=new z.a.MetalSynth({envelope:{attack:.001,decay:.1,release:.1}}).connect(R);function G(t,e){k==x["soft"]&&(W.volume.value=-10,W.triggerAttackRelease(z.a.Frequency(t,"midi"),"8n")),k==x["dark"]&&(H.volume.value=-10,H.triggerAttackRelease(z.a.Frequency(t,"midi"),"8n")),k==x["vivid"]&&(B.volume.value=-10,B.triggerAttackRelease(z.a.Frequency(t,"midi"),"8n"))}function K(t,e){k==x["soft"]&&(I.volume.value=-10,I.triggerAttackRelease(z.a.Frequency(t,"midi"),"8n")),k==x["dark"]&&(Y.volume.value=-10,Y.triggerAttackRelease(z.a.Frequency(t,"midi"),"8n")),k==x["vivid"]&&(V.volume.value=-10,V.triggerAttackRelease(z.a.Frequency(t,"midi"),"8n"))}function Q(){C&&("started"===z.a.Transport.state?z.a.Transport.stop():z.a.Transport.start(),L=setInterval(Z,10))}function X(){z.a.Transport.stop(),clearInterval(L)}function Z(){z.a.Transport.bpm.value;T+P>=1&&(T-=P);var t=Date.now()%6e3/6e3/E+T,e=Math.floor(t*E),n=Math.floor((t*E-e)*w);function i(t){return t.quantizedStartStep===n}if("started"===z.a.Transport.state){if(n!=O){var a=C[e].notes.filter(i);a.forEach(function(t){t.quantizedEndStep,t.quantizedStartStep;G(t.pitch);var e=Math.random();e>.4&&(U.resonance=2e3*Math.random()+500,U.volume.value=-100*Math.random()-16,U.triggerAttackRelease("16n"))});var o=D[e].notes.filter(i);o.forEach(function(t){t.quantizedEndStep,t.quantizedStartStep;K(t.pitch);var e=Math.random();e>.8&&(J.volume.value=-11,J.triggerAttackRelease("C2","8n"))});var r=Math.random();r>.9&&(J.volume.value=-11,J.triggerAttackRelease("A1","8n"))}e,O=n}}var tt={strokeColor:"rgba(150, 220, 255, 1)",strokeWidth:"2"},et={fontFamily:"Helvetica Neue",fontWeight:"bold",fontSize:12,justification:"center",fillColor:"white"},nt={strokeColor:"MediumOrchid ",strokeWidth:"3"},it={strokeWidth:"2",strokeColor:"rgba(235, 235, 235, 0.6)"},at={strokeWidth:"1",strokeColor:"rgba(200, 200, 200, 0.2)"},ot={name:"graphEditor",props:["videoDuration","currentTime","isPlaying"],data:function(){return{paper:new this.$paper.PaperScope,height:window.innerWidth/3,intensities:[]}},mounted:function(){this.canvas=this.$el.querySelector("canvas"),this.paper.setup(this.canvas),this.paper.activate(),this.width=this.canvas.width,this.height=this.canvas.height,this.horizontalPadding=20,this.zeroPosition=this.height-15,this.unit=.85*this.zeroPosition,this.min=this.zeroPosition-this.unit,this.max=this.zeroPosition,this.draw(this.width,this.height),this.createTool()},watch:{videoDuration:function(t){this.baseLine.text[1].content=this.renderedTime(t),this.generate()},isPlaying:function(t){t&&this.play()},intensities:function(t){this.$emit("intensities",t)}},computed:{currentTimeComputed:{get:function(){return this.renderedTime(this.currentTime)},set:function(t){this.$emit("currentTimeChanged",t)}}},methods:{generate:function(){var t=this,e=[];this.stroke&&this.stroke.segments.forEach(function(n){var i=t.convertPointData(n.point.x,n.point.y);e.push({time:i.x,value:i.y})}),this.intensities=e},play:function(){var t=this.cursor.position.x,e=60*this.videoDuration,n=this.baseLine.length/e;if(this.isPlaying)if(t>=this.horizontalPadding&&t<=this.width-this.horizontalPadding){this.cursor.position.x=t+n;var i=Number(((this.cursor.position.x-this.horizontalPadding)/this.baseLine.length).toFixed(2)),a=Number((this.videoDuration*i).toFixed());this.baseLine.text[0].content=this.renderedTime(a),window.requestAnimationFrame(this.play)}else this.cursor.position.x=this.horizontalPadding,this.currentTimeComputed=0,this.stop()},stop:function(){this.$emit("stop")},draw:function(t,e){this.createBaseLine(t,e),this.createCursor(t,e),this.createStroke(t,e)},createBaseLine:function(t,e){var n=new Path;n.style=it,n.add(new Point(this.horizontalPadding,this.min)),n.add(new Point(this.horizontalPadding,this.max)),n.text=new PointText(this.horizontalPadding+3,this.min-15),n.text.content="Intensity",n.text.style=et;for(var i=0;i<5;i++){var a=this.min+i*this.height/6,o=new Path;o.style=at,o.add(new Point(this.horizontalPadding,a)),o.add(new Point(t-this.horizontalPadding,a))}this.baseLine=new Path,this.baseLine.style=it,this.baseLine.add(new Point(this.horizontalPadding,this.zeroPosition)),this.baseLine.add(new Point(t-this.horizontalPadding,this.zeroPosition)),this.baseLine.text=[],this.baseLine.text[0]=new PointText(this.horizontalPadding-4,this.zeroPosition+15),this.baseLine.text[0].content=this.renderedTime(0),this.baseLine.text[1]=new PointText(this.baseLine.length+4+this.horizontalPadding,this.zeroPosition+15),this.baseLine.text[1].content=this.videoDuration?this.renderedTime(this.videoDuration):"00:00",this.baseLine.text.forEach(function(t){t.style=et})},createStroke:function(t,e){var n=this;this.stroke=new Path,this.stroke.style=tt,this.stroke.name="stroke";var i=[{x:this.horizontalPadding,y:this.max/2},{x:t/3,y:this.min},{x:t/2,y:this.max/1.5},{x:t-this.horizontalPadding,y:this.max}];i.forEach(function(t,e){var i=n.stroke.add(new Point(t.x,t.y));i.text=new PointText(t.x,t.y-10);var a=n.convertPointData(t.x,t.y);i.text.content="".concat(a.y),i.text.style=et}),this.stroke.fullySelected=!0,this.stroke.selectedColor="rgba(150, 220, 255, 1)",console.log(this.stroke,"st")},createCursor:function(t,e){var n=new Path;n.style=nt,n.add(new Point(this.horizontalPadding,this.min)),n.add(new Point(this.horizontalPadding,this.zeroPosition)),this.cursor=n,this.cursor.name="cursor"},addPoint:function(t,e){var n=0;this.stroke.segments.reduce(function(e,i,a){return t-i.point.x<e&&t-i.point.x>=0?(n=a+1,t-i.point.x):e},this.width);var i=this.stroke.insert(n,new Point({x:t,y:e,selected:!0})),a=this.convertPointData(t,e);return i.text=new PointText(t,e-10),i.text.content="".concat(a.y),i.text.style=et,this.stroke.fullySelected=!0,this.generate(),i},renderedTime:function(t){var e=Math.floor(t/60);e=e<10?"0".concat(e):e;var n=t%60;return n=n<10?"0".concat(n):n,"".concat(e,":").concat(n)},convertPointData:function(t,e){var n={};if(t){var i=Number(((t-this.horizontalPadding)/this.baseLine.length).toFixed(2));n.x=Number((this.videoDuration*i).toFixed())}if(e){var a=(e-this.zeroPosition)/(-1*this.unit);-0===a?a=0:0!==a&&-1!==a&&1!==a&&(a=Number(a.toFixed(2))),n.y=a}return n},createTool:function(){var t=this,e=document.querySelector(".graph-editor");this.tool=new Tool;var n=null,i=null,a=null;this.tool.onMouseDown=function(o){n=null,a=t.cursor.hitTest(o.point,{fill:!0,stroke:!0,tolerance:5}),i=t.stroke.hitTest(o.point,{stroke:!0,segments:!0,tolerance:10}),a?e.style.cursor="grabbing":i&&("stroke"===i.type?(n=t.addPoint(o.point.x,o.point.y),e.style.cursor="grabbing"):"segment"==i.type&&(n=i.segment,e.style.cursor="grabbing"))},this.tool.onMouseDrag=function(i){var o=i.point.x,r=i.point.y;if(a){if(o>=t.horizontalPadding&&o<=t.width-t.horizontalPadding){t.cursor.position.x=o;var s=Number(((t.cursor.position.x-t.horizontalPadding)/t.baseLine.length).toFixed(2));t.currentTimeComputed=Number((t.videoDuration*s).toFixed()),t.baseLine.text[0].content=t.currentTimeComputed}e.style.cursor="grabbing"}else e.style.cursor="auto";if(n){var h=o>=t.horizontalPadding&&o<=t.width-t.horizontalPadding&&r>=t.min&&r<=t.max,c=!n.previous||o>n.previous.point.x,d=!n.next||o<n.next.point.x;if(h&&c&&d){n.point.x+=i.delta.x,n.point.y+=i.delta.y,n.text.point.x+=i.delta.x,n.text.point.y+=i.delta.y;var u=t.convertPointData(i.point.x,i.point.y).y;n.text.content=u,t.generate()}}},this.tool.onMouseMove=function(n){var i=t.cursor.hitTest(n.point,{stroke:!0,tolerance:5}),a=t.stroke.hitTest(n.point,{segments:!0,tolerance:5});(i||a)&&(e.style.cursor="grab");var o=t.stroke.hitTest(n.point,{stroke:!0,tolerance:5});o&&(e.style.cursor="crosshair"),i||a||o||(e.style.cursor="auto")}}}},rt=ot,st=(n("4990"),Object(m["a"])(rt,g,S,!1,null,"c6ce6e3c",null));st.options.__file="graphEditor.vue";var ht=st.exports,ct=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"mood-selector"},[n("h5",[t._v("Mood")]),n("div",{staticClass:"moods"},t._l(t.moods,function(e){return n("div",{staticClass:"mood",class:e===t.selectedMood?"selected":"",on:{click:function(n){t.select(e)}}},[t._v("\n      "+t._s(e)+"\n    ")])}))])},dt=[],ut={name:"moodSelector",props:[],data:function(){return{moods:["soft","vivid","dark"],selectedMood:"vivid"}},methods:{select:function(t){this.selectedMood=t,this.$emit("selectMood",this.selectedMood)}}},pt=ut,lt=(n("c40a"),Object(m["a"])(pt,ct,dt,!1,null,"282368ac",null));lt.options.__file="moodSelector.vue";var mt=lt.exports,ft={name:"editor",components:{videoPlayer:v,graphEditor:ht,moodSelector:mt},data:function(){return{videoDuration:null,currentTime:0,isPlaying:!1,intensities:[],mood:"vivid",mute:!0}},mounted:function(){var t=this;console.log("editor"),window.addEventListener("keypress",function(e){32==e.keyCode&&(t.isPlaying?t.stop():t.start())})},methods:{selectMood:function(t){this.mood=t,F(t)},intensityChange:function(t){A(t)},getIntensities:function(t){this.intensities=t},start:function(){F(this.mood),A(1),this.play()},play:function(){this.isPlaying=!0,Q()},stop:function(){this.isPlaying=!1,X()},getVideoDuration:function(t){this.videoDuration=Number(t.toFixed())},currentTimeChanged:function(t){this.currentTime=t},onResize:function(t){}}},vt=ft,gt=(n("7433"),Object(m["a"])(vt,h,c,!1,null,"235d32fa",null));gt.options.__file="editor.vue";var St=gt.exports,Mt={name:"home",components:{editor:St}},zt=Mt,yt=(n("8b71"),Object(m["a"])(zt,r,s,!1,null,null,null));yt.options.__file="Home.vue";var qt=yt.exports,xt={name:"app",components:{home:qt}},Et=xt,Pt=(n("034f"),Object(m["a"])(Et,a,o,!1,null,null,null));Pt.options.__file="App.vue";var bt=Pt.exports,wt=n("2222"),kt=n.n(wt);i["a"].config.productionTip=!1,i["a"].prototype.$paper=kt.a,kt.a.install(window),new i["a"]({render:function(t){return t(bt)}}).$mount("#app")},7:function(t,e){},7433:function(t,e,n){"use strict";var i=n("8807"),a=n.n(i);a.a},8:function(t,e){},"852d":function(t,e,n){},"85f1":function(t,e,n){},8807:function(t,e,n){},"8b71":function(t,e,n){"use strict";var i=n("85f1"),a=n.n(i);a.a},babe:function(t,e,n){},c21b:function(t,e,n){},c40a:function(t,e,n){"use strict";var i=n("babe"),a=n.n(i);a.a},eee0:function(t,e,n){}});
//# sourceMappingURL=app.ae72c104.js.map